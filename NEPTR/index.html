<!DOCTYPE HTML>
<html>
<title>
	NEPTR
</title>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
	<script src="../skulpt/dist/skulpt.js" type="text/javascript"></script>
	<script src="../skulpt/dist/builtin.js" type="text/javascript"></script>
	<script src="game.js" type="text/javascript"></script>
	<script src="python.js" type="text/javascript"></script>
	<script src="matrices.js" type="text/javascript"></script>
	<script src="board.js" type="text/javascript"></script>
	<script src="robot.js" type="text/javascript"></script>
	<script src="game.js" type = "text/javascript"></script>
	
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/css/bootstrap.min.css">
	
	<link rel="stylesheet" href="index.css">
	
	<!-- Latest compiled and minified JavaScript -->
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"></script>
	
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>
</head>
<body>
	<div class="container" id="allContent">
		<div class="row" id="titleHolder">
			<div class="col-lg-12">
				NEPTR
			</div>
		</div>
		
		<div class="row" id="content">
			
			<div class="col-lg-4" id="pythonSide">
				Your code:
				<textarea id="givenCode" cols="50" rows="3" disabled>#This code tells you about the input
robotLoc = robotLocation
robotSurrounding = {"N":northInfo, "S":southInfo, "E": eastInfo, "W":westInfo}</textarea>
				<textarea id="userCode" cols="50" rows="25">#Put your code here!</textarea><br>
				<button type="button" id="runRobot" class="btn btn-primary">Run Robot</button>
			</div>
			
			<div class="col-lg-8" id="gameSide">
				Game board:
				<div>
					<table id="gameBoard">
					</table>
					<br>
					<textarea id="gameStatus" cols="90" rows="5" readonly></textarea>
				</div>
				<div id="controls">
					<button class = "btn btn-success" id="playPause">Play</button>
					<button class = "btn btn-default" id="doOneStep">Step</button>
				</div>
			</div>
			
		</div>
	</div>
	<textarea id="output"></textarea>
	
	<script type="text/javascript">
	
		$.extend({
			getUrlVars : function() {
				var vars = [], hash;
				var hashes = window.location.href.slice(
					window.location.href.indexOf('?') + 1).split('&');
				
				for (var i = 0; i < hashes.length; i++) {
					hash = hashes[i].split('=');
					vars.push(hash[0]);
					vars[hash[0]] = hash[1];
				}
				return vars;
			},
			getUrlVar : function(name) {
				return $.getUrlVars()[name];
			}
		})
		
		var pyout;
		var robot;
		var board;new Robot(5,[1,2]);
		
		$(document).ready(function() {
			var level = $.getUrlVar('level');
			if (!(level>0)) {level = 1;} 
			console.log("level is " + level);
			
			board = Board(levelList[level-1]);
			robot = new Robot(5,[1,2]); 
			console.log(levelList[level-1]);
			loadLevel(board);
	
			var coreLoop = function() {
				if (robot.isDead) {
					alert ("your robot has died!");
					flag = false;
				}
				
				if (pyout == "N" ||
				pyout == "S" ||
				pyout == "E" ||
				pyout == "W") {
					robot.move(pyout);
				}
				
				console.log(robot.getLocation());
			
				var robotx = robot.location[0];
				var roboty = robot.location[1];
				if (board.finalMatrix[0][1].getState() == "wall") {
					robot.damage(1);
					robot.moveBack(pyout);
				}
				
	    		console.log("you hit a wall!");
			}
	
			// button listeners
			$(function(){
				$('#runRobot').on('click', function(e){
		            e.preventDefault(); // preventing default click action
		            console.log('clicked run button');
		            runit(robot, board);
		            pyout = $("#output").value;
		            $("#gameStatus").append(pyout);
		           })
		           
		        $("#playPause").on('click', function(e){
		        	//do something
		        })
		        
		        $("#doOneStep").on('click', function(e){
		        	
		        })
			})
	
			
		})
	</script>
	
</body>
</html>